<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Smart Age Calculator</title>

<link rel="icon" href="favicon.png">
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#4b2fa3">

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

<style>
body{
  font-family:Arial,sans-serif;
  background:#eef2f3;
  padding:30px;
  text-align:center;
}
.container{
  max-width:500px;
  margin:auto;
  background:#fff;
  padding:25px;
  border-radius:15px;
  box-shadow:0 8px 20px rgba(0,0,0,.1);
}
h1{color:#0a3d62;}
input,select,button{
  padding:10px;
  width:100%;
  margin-top:10px;
  font-size:16px;
}
button{
  background:#0a3d62;
  color:#fff;
  border:none;
  border-radius:10px;
  cursor:pointer;
}
button:hover{background:#09509e;}
#result{
  margin-top:20px;
  white-space:pre-line;
  color:#0a3d62;
  font-weight:bold;
}

/* Modal */
.modal{
  display:none;
  position:fixed;
  top:0;left:0;
  width:100%;height:100%;
  background:rgba(0,0,0,.5);
}
.modal-content{
  background:#fff;
  padding:20px;
  max-width:350px;
  margin:100px auto;
  border-radius:15px;
}

/* ID Card */
#idCard{
  display:none;
  width:720px;
  background:#fff;
  border-radius:18px;
  overflow:hidden;
  box-shadow:0 12px 30px rgba(0,0,0,.25);
  font-family:Arial;
  position:relative;
}
.card-header{
  background:linear-gradient(135deg,#4b2fa3,#6a5acd);
  color:#fff;
  padding:18px;
  font-size:22px;
  font-weight:bold;
}
.card-body{
  display:flex;
  gap:25px;
  padding:25px;
}
.card-body img{
  width:140px;
  height:160px;
  border-radius:12px;
  border:3px solid #eee;
}
.age-box{
  background:#f4f6fb;
  padding:10px;
  border-radius:10px;
  margin-top:10px;
  font-size:13px;
}
.watermark{
  position:absolute;
  bottom:10px;
  right:15px;
  font-size:36px;
  color:rgba(0,0,0,0.05);
  font-weight:bold;
}
</style>
</head>

<body>

<div class="container">

<select id="language" onchange="changeLanguage()">
  <option value="en">English</option>
  <option value="ta">தமிழ்</option>
  <option value="hi">हिंदी</option>
</select>

<h1 id="title">Smart Age Calculator</h1>

<input type="datetime-local" id="dob">
<button id="showAgeBtn" onclick="calculateAge()">Show My Age</button>
<button id="downloadBtn" onclick="openModal()">Download Age ID Card</button>
<button id="installBtn" style="display:none;">Install App</button>

<div id="result"></div>
</div>

<!-- Modal -->
<div class="modal" id="modal">
  <div class="modal-content">
    <h3>ID Card Details</h3>
    <input type="text" id="name" placeholder="Enter Name">
    <select id="gender">
      <option value="male">Male</option>
      <option value="female">Female</option>
    </select>
    <button onclick="downloadID()">Generate & Download</button>
  </div>
</div>

<!-- ID Card -->
<div id="idCard">
  <div class="card-header">SMART AGE ID CARD</div>
  <div class="card-body">
    <img id="photo">
    <div>
      <h2 id="cardName"></h2>
      <p><b id="genderLbl">Gender</b>: <span id="cardGender"></span></p>
      <p><b id="dobLbl">DOB</b>: <span id="cardDob"></span></p>
      <p><b>Card No</b>: <span id="cardNo"></span></p>
      <p><b id="issuedLbl">Issued</b>: <span id="issuedDate"></span></p>
      <div class="age-box">
        <b id="ageLbl">Age Details</b>
        <div id="cardAge"></div>
      </div>
    </div>
  </div>
  <div class="watermark">SMART AGE</div>
</div>

<script>
let ageText="";
function calculateAge(){
  const dob=new Date(document.getElementById("dob").value);
  const now=new Date();
  if(!dob||dob>now){alert("Enter valid DOB");return;}

  let y=now.getFullYear()-dob.getFullYear();
  let m=now.getMonth()-dob.getMonth();
  let d=now.getDate()-dob.getDate();

  if(d<0){m--;d+=new Date(now.getFullYear(),now.getMonth(),0).getDate();}
  if(m<0){y--;m+=12;}

  const diff=now-dob;
  const days=Math.floor(diff/86400000);
  const hours=days*24;
  const minutes=hours*60;
  const seconds=minutes*60;

  ageText=`${y} years ${m} months ${d} days
or ${days.toLocaleString()} days
or ${hours.toLocaleString()} hours
or ${minutes.toLocaleString()} minutes
or ${seconds.toLocaleString()} seconds`;

  document.getElementById("result").innerText=ageText;
}

function openModal(){
  if(!ageText){alert("Calculate age first");return;}
  document.getElementById("modal").style.display="block";
}

function downloadID(){
  const name=document.getElementById("name").value||"User";
  const gender=document.getElementById("gender").value;

  document.getElementById("cardName").innerText=name;
  document.getElementById("cardGender").innerText=gender.toUpperCase();
  document.getElementById("cardDob").innerText=
    new Date(document.getElementById("dob").value).toLocaleDateString();
  document.getElementById("cardNo").innerText="AGE-"+Math.floor(100000+Math.random()*900000);
  document.getElementById("issuedDate").innerText=new Date().toLocaleDateString();
  document.getElementById("cardAge").innerText=ageText;
  document.getElementById("photo").src=
    gender==="male"?"male_icon.png":"female_icon.png";

  document.getElementById("modal").style.display="none";
  document.getElementById("idCard").style.display="block";

  html2canvas(document.getElementById("idCard")).then(c=>{
    const a=document.createElement("a");
    a.href=c.toDataURL();
    a.download="Age_ID_Card.png";
    a.click();
    document.getElementById("idCard").style.display="none";
  });
}

/* Language */
const t={
 en:{title:"Smart Age Calculator",show:"Show My Age",down:"Download Age ID Card",inst:"Install App",age:"Age Details",gender:"Gender",dob:"DOB",issued:"Issued"},
 ta:{title:"வயது கணிப்பான்",show:"என் வயதை காண்பி",down:"வயது அடையாள அட்டை",inst:"ஆப்பை நிறுவு",age:"வயது விவரம்",gender:"பாலினம்",dob:"பிறந்த தேதி",issued:"வெளியீடு"},
 hi:{title:"आयु कैलकुलेटर",show:"मेरी आयु दिखाएं",down:"आयु पहचान पत्र",inst:"ऐप इंस्टॉल करें",age:"आयु विवरण",gender:"लिंग",dob:"जन्म तिथि",issued:"जारी"}
};
function changeLanguage(){
 const l=document.getElementById("language").value;
 document.getElementById("title").innerText=t[l].title;
 document.getElementById("showAgeBtn").innerText=t[l].show;
 document.getElementById("downloadBtn").innerText=t[l].down;
 document.getElementById("installBtn").innerText=t[l].inst;
 document.getElementById("ageLbl").innerText=t[l].age;
 document.getElementById("genderLbl").innerText=t[l].gender;
 document.getElementById("dobLbl").innerText=t[l].dob;
 document.getElementById("issuedLbl").innerText=t[l].issued;
}

/* PWA */
let deferredPrompt;
window.addEventListener("beforeinstallprompt",e=>{
 e.preventDefault();deferredPrompt=e;
 document.getElementById("installBtn").style.display="block";
});
document.getElementById("installBtn").onclick=()=>{
 deferredPrompt.prompt();
};
if("serviceWorker"in navigator){
 navigator.serviceWorker.register("service-worker.js");
}
</script>

</body>
</
